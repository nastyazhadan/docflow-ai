# DocFlow AI

–°–∏—Å—Ç–µ–º–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ RAG (Retrieval-Augmented Generation) –Ω–∞ –æ—Å–Ω–æ–≤–µ LlamaIndex –∏ Qdrant.

–ö–æ–≥–¥–∞ –º–µ–Ω—è–µ—à—å –º–æ–¥–µ–ª–∏ (—á—Ç–æ–±—ã –Ω–µ –∑–∞–±—ã—Ç—å, —á—Ç–æ —á—Ç–æ-—Ç–æ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ. –°–ø—Ä–æ—Å–∏—Ç—å, –Ω–∞–¥–æ –ª–∏ —ç—Ç–æ –¥–µ–ª–∞—Ç—å –¥—Ä—É–≥–æ–π –≤–µ—Ç–∫–µ):

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
docker compose exec api alembic -c /app/core_api/alembic/alembic.ini revision --autogenerate -m "..."
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≥–ª–∞–∑–∞–º–∏ (—á—Ç–æ –Ω–µ –Ω–∞–≥–µ–Ω–µ—Ä–∏–ª–æ –ª–∏—à–Ω–µ–≥–æ)
–ü—Ä–∏–º–µ–Ω–∏—Ç—å
docker compose exec api alembic -c /app/core_api/alembic/alembic.ini upgrade head

alembic revision --autogenerate ... ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—à—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –º–µ–Ω—è–µ—à—å ORM-–º–æ–¥–µ–ª–∏ (–¥–æ–±–∞–≤–∏–ª–∞ –ø–æ–ª–µ/—Ç–∞–±–ª–∏—Ü—É/–∏–Ω–¥–µ–∫—Å).
alembic upgrade head ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—à—å –ø–æ—Å–ª–µ –Ω–æ–≤–æ–π —Ä–µ–≤–∏–∑–∏–∏ (–≤ –¥–µ–≤–µ —Ö–æ—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å; –≤ –ø—Ä–æ–¥–µ ‚Äî –ø—Ä–∏ –¥–µ–ø–ª–æ–µ).

–ó–∞–ø—É—Å—Ç–∏—Ç—å web:

 ```bash
 cd ui
 streamlit run .\web_app.py
 ```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ —Å Ollama. –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:**

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama:**
    - –°–∫–∞—á–∞–π—Ç–µ —Å https://ollama.com/
    - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ: `ollama serve`

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥–µ–ª–∏:**
   ```bash
   # –ú–æ–¥–µ–ª—å –¥–ª—è LLM (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤)
   ollama pull gemma3:4b
   
   # –ú–æ–¥–µ–ª—å –¥–ª—è embeddings (–≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è)
   ollama pull nomic-embed-text
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Ollama —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   ```bash
   curl http://localhost:11434/api/tags
   ```

–ë–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∏ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ Ollama —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ollama –∏ –º–æ–¥–µ–ª–∏ (—Å–º. –≤—ã—à–µ)

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose up -d

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
docker compose ps

# 4. –û—Ç–∫—Ä–æ–π—Ç–µ Swagger UI
# Core API: http://localhost:8004/docs
```

---

## –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ü–æ–ª–æ–∂–∏—Ç–µ —Ñ–∞–π–ª—ã –≤ data/docs/
echo "–í–∞—à —Ç–µ–∫—Å—Ç" > data/docs/my_doc.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
python scripts/quick_index.py my-space "*.txt"
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ API

–°–º. `INGESTION_GUIDE.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

---

## –ó–∞–ø—Ä–æ—Å—ã –∫ RAG —Å–∏—Å—Ç–µ–º–µ

```bash
curl -X POST http://localhost:8004/spaces/my-space/query \
  -H "Content-Type: application/json" \
  -d '{
    "query": "–í–∞—à –≤–æ–ø—Ä–æ—Å",
    "top_k": 5
  }'
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Swagger UI: http://localhost:8004/docs

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–§–∞–π–ª—ã/URL ‚Üí Scraper ‚Üí Cleaner ‚Üí Normalizer ‚Üí Indexer ‚Üí Core API ‚Üí Qdrant
                                                                    ‚Üì
                                                              RAG Queries
```

---

## –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

‚úÖ **–ù–µ–¥–µ–ª–∏ 1-2 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:**

- Core API —Å endpoints `/spaces/{id}/ingest` –∏ `/spaces/{id}/query`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Qdrant
- –ü–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ Ollama

üìù **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–ù–µ–¥–µ–ª—è 3):**

- Multi-tenant –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- UI
